/*!
 * pbjs JavaScript Framework v0.6.0
 * http://saartje87.github.com/pbjs
 *
 * Includes Qwery
 * https://github.com/ded/qwery
 *
 * Copyright 2013 Niek Saarberg
 * Licensed MIT
 *
 * Build date 2013-03-20 23:37
 */
(function(e,t,n){this[e]=n(t)})("PB",this,function(e){"use strict";function u(e,t){return function(){var n=this.parent,r;return this.parent=t,r=e.apply(this,arguments),this.parent=n,r}}function p(e){var n=e.__PBID__||(e.__PBID__=t.id());return t.$.cache[n]||(t.$.cache[n]={})}function d(e){var t;return e.length===2&&(t={},t[e[0]]=e[1]),t||e[0]}function w(e){var t={duration:.4,effect:"ease"};for(var n=1;n<e.length;n++)switch(typeof e[n]){case"function":t.fn=e[n];break;case"number":t.duration=e[n];break;case"string":t.effect=e[n].replace(/([A-Z])/g,"-$1").toLowerCase()}return t}function S(e,n){t.overwrite(e,t.$.Event);if(!E.isLegacy)return e;e.target=e.srcElement||n,e.currentTarget=n;if(e.type==="mouseover"||e.type==="mouseenter")e.relatedTarget=e.fromElement;else if(e.type==="mouseout"||e.type==="mouseleave")e.relatedTarget=e.toElement;return e.pageX===o&&(e.pageX=e.clientX+(c.scrollLeft||h.scrollLeft)-(c.clientLeft||0),e.pageY=e.clientY+(c.scrollTop||h.scrollTop)-(c.clientTop||0)),e.which=e.keyCode===o?e.charCode:e.keyCode,e.which=e.which===0?1:e.which===4?2:e.which===2?3:e.which,e}function x(e,t,n){return function(r){r=S(r,t),e.call(n||t,r)}}function T(e,n,r,i){var s=p(e),o=0,u,a;s.eventData=s.eventData||{},s.eventData[n]=s.eventData[n]||[],u=s.eventData[n];for(;o<u.length;o++)if(u[o].fn===r)return;a=x(r,t.$(e),i),u[o]={fn:r,responder:a},f.addEventListener?e.addEventListener(n,a,!1):e.attachEvent("on"+n,a)}function N(e,t,n){var r=p(e).eventData,i,s=r[t].length;while(s--)if(r[t][s].fn===n){i=r[t][s],r[t].splice(s,1);break}if(!i)return;f.removeEventListener?e.removeEventListener(t,i.responder,!1):e.detachEvent("on"+t,i.responder)}function C(e){var t=p(e),n=t.eventData,r,i;for(name in n)if(n.hasOwnProperty(name)){r=n[name];for(i=0;i<r.length;i++)N(e,name,r[i].fn)}delete t.eventData}function L(e){var n=[],r=0;for(;r<this.length;r++)typeof e=="string"?t.$.selector.matches(this[r],e)&&n.push(this[r]):e.call(null,this[r])===!0&&n.push(this[r]);return new this.constructor(n)}function A(e,n){var r="",i,s,o=t.type(e);if(o!=="array"&&o!=="object")throw new TypeError(o+" given.");if(o==="array"||o==="object")for(i in e)e.hasOwnProperty(i)&&(s=e[i],s!==null&&typeof s=="object"?r+=A(s,n?n+"["+i+"]":i):r+=encodeURIComponent(n?n+(o==="array"?"[]":"["+i+"]"):i)+"="+encodeURIComponent(s)+"&");return n?r:r.replace(/&$/,"")}function O(e){var t={},n;return e=e.indexOf("?")!==-1?e.substr(e.indexOf("?")+1):e,e.split("&").forEach(function(e){n=e.split("="),t[decodeURIComponent(n[0])]=decodeURIComponent(n[1])}),t}var t={},n=e.PB,r=n?n.id():0,i=Array.prototype.slice,s=Object.prototype.toString,o;t.VERSION="0.6.0",t.id=function(){return++r},t.overwrite=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},t.extend=function(e,t){var n;for(n in t)t.hasOwnProperty(n)&&e[n]===o&&(e[n]=t[n]);return e},t.clone=function(e){var n,r;if(e===null||typeof e!="object")return e;n=t.type(e)==="object"?{}:[];for(r in e)e.hasOwnProperty(r)&&(n[r]=t.clone(e[r]));return n},t.each=function(e,t,n){var r;if(!e||typeof t!="function")return;for(r in e)if(e.hasOwnProperty(r)&&t.call(n,r,e[r],e)===!0)return},t.toArray=function(e){var t=0,n=[],r=e.length;for(;t<r;t++)n[t]=e[t];return n},t.type=function(e){var t=s.call(e);return t.substr(8,t.length-9).toLowerCase()},t.noConflict=function(){return f.PB===t&&(f.PB=n),t},t.Class=function(e,n){var r,i,s,o,a,f;n?f=e.prototype:(n=e,e=null),r=n.construct;if(typeof r=="function")if(e&&f.construct){var l;i=function(){var e=r;r=function(){var t=this.parent;this.parent=f.construct,e.apply(this,arguments),this.parent=t},typeof r=="function"&&r.apply(this,arguments)}}else i=n.construct;else e&&f.construct?i=function(){f.construct.apply(this,arguments)}:i=function(){};for(s in n)n.hasOwnProperty(s)&&(a=n[s],o=e?f[s]:!1,typeof o=="function"&&typeof a=="function"&&(a=u(a,o)),i.prototype[s]=a);return e&&t.extend(i.prototype,f),i},t.Observer=t.Class({construct:function(){this.listeners={}},on:function(e,t,n){var r=e.split(" "),i=r.length;if(typeof t!="function")throw new TypeError("PB.Observer error, fn is not a function");while(i--)e=r[i],this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push({fn:t,context:n});return this},off:function(e,t){var n=this.listeners[e],r;if(!e)return this.listeners={},this;if(!n)return this;if(!t)return n.length=0,this;r=n.length;while(r--)n[r].fn===t&&n.splice(r,1);return n.length||delete this.listeners[e],this},emit:function(e){var t=this.listeners[e],n=i.call(arguments,1),r=0;if(!t)return this;for(;r<t.length;r++)t[r].fn.apply(t[r].context,n);return this}}),t.Queue=t.Class(t.Observer,{construct:function(){var e=this;return this.parent(),this._queue=[],this.next=function(){e.run()},this},queue:function(e,t){return this._queue.push({fn:e,context:t}),this},run:function(){var e=this._queue.shift(),t=this;if(!e)return;return e.fn.call(e.fn.context,this.next),this},stop:function(){return this._queue.unshift(o),this},clear:function(){return this._queue.length=0,this}});var a,f=e,l=f.document,c=l.documentElement,h=l.body;t.$=function(e){if(!e)return null;if(e instanceof a)return e;if(e.nodeType===1||e.nodeType===9||e===f)return new a(e);if(typeof e=="string"){if(e.charAt(0)==="#")return e=l.getElementById(e.substr(1)),e?new a(e):null;if(e.charAt(0)==="<"&&e.charAt(e.length-1)===">")return t.$.buildFragment(e)}return null},t.$$=function(e){return(new a(document)).find(e)},a=function(e){var t=0;if(e.nodeName||e===f)this[0]=e,t=1;else if("length"in e)for(t=0;t<e.length;t++)this[t]=e[t];this.length=t},a.prototype.constructor=a,t.$.fn=a.prototype,t.$.cache={},t.$.hooks={},t.$.hook=function(e,n){if(typeof n!="function")throw new TypeError("fn must be a function");t.$.hooks[e]=n};var v=document.createElement("div"),m="O ms Moz Webkit".split(" "),g="animationName transform transition transitionProperty transitionDuration transitionTimingFunction boxSizing backgroundSize boxReflect".split(" "),y={"float":v.style.cssFloat!==o?"cssFloat":"styleFloat"},b={zIndex:!0,zoom:!0,fontWeight:!0,opacity:!0};t.each(g,function(e,t){var n;if(t in v.style)return y[t]=t;n=t.charAt(0).toUpperCase()+t.substr(1),e=m.length;while(e--)if(m[e]+n in v.style)return y[t]=m[e]+n}),v=null,t.overwrite(a.prototype,{setStyle:function(e){var n=0,r,i;e=d(arguments);for(;n<this.length;n++)for(r in e){i=e[r];if(t.$.hooks["setStyle."+r])t.$.hooks["setStyle."+r](this[n],i);else{typeof i=="number"&&!b[r]&&(i+="px");try{this[n].style[y[r]||r]=i}catch(s){}}}return this},getStyle:function(e,n){var r;if(t.$.hooks["setStyle."+e])return t.$.hooks["getStyle."+e](this[0]);e=y[e]||e,r=this[0].style[e];if(n||!r||r==="auto")r=f.getComputedStyle(this[0],null)[e];return e==="opacity"?r?parseFloat(r):1:/^-?[\d.]+px$/i.test(r)?parseInt(r,10):r}}),a.prototype.morph=y.transition?function(e){var n=w(arguments);return this.each(function(){var r=t.$(this),i=r.getData("morph")||{},s={transition:"all "+n.duration+"s "+n.effect+" 0s"};i.running&&r.stop(!1),i.end=e,i.fn=n.fn,i.running=!0,t.each(e,function(e){s[e]=r.getStyle(e,!0)}),r.setStyle(s),this.offsetHeight,r.setStyle(e),i.timer=setTimeout(function(){if(!r[0].parentNode)return;i.running=!1,r.setStyle({transition:""}),i.fn&&i.fn(r)},n.duration*1e3+50),r.setData("morph",i)})}:function(e){var n=w(arguments),r=0;this.setStyle(e);if(n.fn)for(;r<this.length;r++)n.fn(t.$(this[r]));return this},a.prototype.stop=function(e){return this.each(function(){var n=t.$(this),r=n.getData("morph");if(!r||!r.running)return;e=e===o?!0:!!e,r.running=!1,clearTimeout(r.timer),r.end.transition="none 0s ease 0s",e||t.each(r.end,function(e){r.end[e]=n.getStyle(e,!0)}),n.setStyle(r.end),e&&r.fn&&r.fn(this)})},t.overwrite(a.prototype,{append:function(e){var n=0;e=t.$(e);for(;n<e.length;n++)this[0].appendChild(e[n]);return this},appendTo:function(e){var n=0;e=t.$(e);for(;n<this.length;n++)e[0].appendChild(this[n]);return this},prepend:function(e){var n=0,r=this[0].firstElementChild||this[0].firstChild;e=t.$(e);for(;n<e.length;n++)r?this[0].insertBefore(e[n],r):this[0].appendChild(e[n]);return this},prependTo:function(e){var n=0,r;e=t.$(e),r=e[0].firstElementChild||e[0].firstChild;for(;n<this.length;n++)r?e[0].insertBefore(this[n],r):e[0].appendChild(this[n]);return this},insertBefore:function(e){var n=0;e=t.$(e);for(;n<this.length;n++)e[0].parentNode.insertBefore(this[n],e[0]);return this},insertAfter:function(e){var n=0,r;e=t.$(e),r=e[0].nextElementSibling||e[0].nextSibling;for(;n<this.length;n++)r?e[0].parentNode.insertBefore(this[n],r):e[0].appendChild(this[n]);return this},replace:function(e){return e=t.$(e),this.insertBefore(e),e.remove(),this}}),t.overwrite(a.prototype,{width:function(){return this.getStyle("width",!0)},innerWidth:function(){return this.getStyle("width",!0)+this.getStyle("paddingLeft",!0)+this.getStyle("paddingRight",!0)},outerWidth:function(e){return e?this.innerWidth()+this.getStyle("borderLeftWidth",!0)+this.getStyle("borderRightWidth",!0)+this.getStyle("marginLeft",!0)+this.getStyle("marginRight",!0):this.innerWidth()+this.getStyle("borderLeftWidth",!0)+this.getStyle("borderRightWidth",!0)},scrollWidth:function(){return this[0].scrollWidth},height:function(){return this.getStyle("height",!0)},innerHeight:function(){return this.getStyle("height",!0)+this.getStyle("paddingTop",!0)+this.getStyle("paddingBottom",!0)},outerHeight:function(e){return e?this.innerHeight()+this.getStyle("borderTopWidth",!0)+this.getStyle("borderBottomWidth",!0)+this.getStyle("marginTop",!0)+this.getStyle("marginBottom",!0):this.innerHeight()+this.getStyle("borderTopWidth",!0)+this.getStyle("borderBottomWidth",!0)},scrollHeight:function(){return this[0].scrollHeight},setScroll:function(e){var t=0;for(;t<this.length;t++)e.top!==o&&(this[t].scrollTop=e.top),e.left!==o&&(this[t].scrollLeft=e.left);return this},getScroll:function(){return{top:this[0].scrollTop,left:this[0].scrollLeft}},position:function(){var e=this[0].getBoundingClientRect();return{top:e.top+(f.scrollY||f.pageYOffset),left:e.left+(f.scrollX||f.pageXOffset)}},offset:function(){var e=this[0],n={top:0,left:0};while(e){n.top+=e.offsetTop,n.left+=e.offsetLeft,e=e.offsetParent;if(!e||t.$(e).getStyle("position")!=="static")break}return n}}),t.overwrite(a.prototype,{each:function(e){var t=i.call(arguments,1);for(var n=0;n<this.length;n++)e.apply(this[n],t);return this},hasClass:function(e){return(" "+this.context.className+" ").indexOf(" "+e+" ")>=0},addClass:function(e){var t=0,n=e.split(" "),r,i;for(;t<this.length;t++){r=" "+this[t].className+" ";for(i=0;i<n.length;i++){if(r.indexOf(" "+n[i]+" ")>=0)continue;this[t].className+=(this[t].className?" ":"")+n[i]}}return this},removeClass:function(e){var t=0,n=e.split(" "),r=n.length,i,s;for(;t<this.length;t++){i=" "+this[t].className+" ";for(s=0;s<r;s++)i.indexOf(" "+n[s]+" ")>=0&&(i=i.replace(" "+n[s]+" "," "));i=i.replace(/^\s|\s$/g,""),i?this[t].className=i:this[t].removeAttribute("class")}return this},setData:function(e){var n=0,r;e=d(arguments);for(;n<this.length;n++)r=p(this[n]),r.data=r.data||{},t.overwrite(r.data,e);return this},getData:function(e){var t=p(this[0]),n;return t.data&&(n=t.data[e]),n===o&&(n=this[0].getAttribute("data-"+e)),n},removeData:function(e){var n=0,r;for(;n<this.length;n++){this[n].removeAttribute("data-"+e),r=this[n].__PBID__;if(!r||!t.$.cache[r])continue;delete t.$.cache[r].data[e]}return this},setAttr:function(e){var t=0,n;e=d(arguments);for(;t<this.length;t++)for(n in e)this[t].setAttribute(n,e[n]);return this},getAttr:function(e){return this[0].getAttribute(e)},removeAttr:function(e){var t=0;for(;t<this.length;t++)this[t].removeAttribute(e);return this},setValue:function(e){var t=0;for(;t<this.length;t++)this[t].value=e;return this},getValue:function(){return this[0].value},show:function(){var e,t=0;for(;t<this.length;t++)e=this[t].style,e.display==="none"&&(e.display=p(this[t])["css-display"]||"block");return this},hide:function(){var e,n=0;for(;n<this.length;n++)e=this[n].style,e.display!=="none"&&(p(this[n])["css-display"]=t.$(this[n]).getStyle("display"),e.display="none");return this},isVisible:function(){var e=t.$(this[0]);return e.getStyle("display")!=="none"&&e.getStyle("opacity")>0},remove:function(){var e=0;for(;e<this.length;e++)delete t.$.cache[this[e].__PBID__],this[e].parentNode&&this[e].parentNode.removeChild(this[e]),delete this[e];return null},empty:function(){return this.setHtml("")},clone:function(e){var n=[],r,i=0,s;for(;i<this.length;i++){n[i]=this[i].cloneNode(e),n[i].removeAttribute("id"),n[i].removeAttribute("__PBID__");if(e){r=t.$(n[i]).find("*");for(;i<length;i++)r[i].removeAttribute("id"),r[i].removeAttribute("__PBID__")}}return new this.constructor(n)},setHtml:function(e){var n=0;for(;n<this.length;n++)try{this[n].innerHTML=e}catch(r){t.$(this[n]).children().remove(),/^<tbody/i.test(e)?t.$("<table>"+e+"</table>").firstChild().appendTo(this[n]):/^<tr/i.test(e)?t.$("<table><tbody>"+e+"<tbody></table>").firstChild().children().appendTo(this[n]):/^<td/i.test(e)?t.$("<table><tbody><tr>"+e+"</tr><tbody></table>").firstChild().firstChild().children().appendTo(this[n]):t.$(e).appendTo(this[n])}return this},getHtml:function(){return this[0].innerHTML},setText:function(e){var t=0;this.setHtml("");for(;t<this.length;t++)this[t].appendChild(l.createTextNode(e));return this},getText:function(){return this[0].textContent||this[0].nodeValue||""}}),t.overwrite(a.prototype,{parent:function(){return new this.constructor(this[0].parentNode)},children:function(){var e=this[0].firstElementChild||this[0].firstChild,t=0,n=[];do e.nodeType===1&&(n[t++]=e);while(e=e.nextSibling);return new this.constructor(n)},firstChild:function(){return t.$(this[0].firstElementChild||this[0].firstChild)},lastChild:function(){return t.$(this[0].lastElementChild||this[0].lastChild)},first:function(){return t.$(this[0])},last:function(){return t.$(this[this.length-1])},next:function(){return t.$(this[0].nextElementSibling||this[0].nextSibling)},prev:function(){return t.$(this[0].previousElementSibling||this[0].previousSibling)},closest:function(){},contains:function(){},find:function(e){var n=0,r=this.length,i,s,o,u,a;for(;n<r;n++)if(n===0)a=t.$.selector.find(e,this[n]);else{u=t.$.selector.find(e,this[n]);for(i=0,s=a.length,o=u.length;i<o;i++)a.indexOf(u[i])===-1&&(a[s++]=u[i])}return new this.constructor(a)},matches:function(e){var n=0;for(;n<this.length;n++)if(!t.$.selector.matches(this[n],e))return!1;return!0}}),t.$.Event={stop:function(){this.preventDefault(),this.stopPropagation()},getWheel:function(){return pbEvent.rmousescroll.test(this.type)?this.wheelDelta?this.wheelDelta/120:-(this.detail||0)/3:0}};var E={isLegacy:!!f.attachEvent&&!f.addEventListener,rmousescroll:/DOMMouseScroll|mousewheel|wheel/,rhtmlevent:/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,rmouseevent:/^(?:click|mouse(?:down|up|over|move|out))$/,supportmouseenterleave:"onmouseenter"in c&&"onmouseleave"in c};E.isLegacy&&t.overwrite(t.$.Event,{stopPropagation:function(){this.cancelBubble=!0},preventDefault:function(){this.returnValue=!1}}),t.overwrite(a.prototype,{on:function(e,t,n){var r=0,i=e.split(" "),s=i.length,o;for(;r<this.length;r++)for(o=0;o<s;o++)T(this[r],i[o],t,n);return this},once:function(){},off:function(e,t){var n=0,r,i;for(;n<this.length;n++){i=p(this[n]).eventData;if(!i&&e&&!i[e])continue;if(!e&&!t)C(this[n]);else if(!t){for(r=0;r<i[e].length;r++)N(this[n],e,i[e][n].fn);delete i[e]}else N(this[n],e,t)}return this},emit:function(e){var t=0,n,r;for(;t<this.length;t++)n=this[t],n.nodeName==="INPUT"||E.rhtmlevent.test(e)?n[e]():l.createEvent?E.rmouseevent.test(e)?(r=l.createEvent("MouseEvents"),r.initMouseEvent(e,!0,!0,f,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(r)):(r=l.createEvent("Events"),r.initEvent(e,!0,!0),n.dispatchEvent(r)):(r=l.createEventObject(),n.fireEvent("on"+e,r));return this}}),t.$.buildFragment=function(e){var n=l.createElement("div"),r;return n.innerHTML=e,r=t.$(n).children(),n=null,r};var k=c.matchesSelector||c.mozMatchesSelector||c.webkitMatchesSelector||c.oMatchesSelector||c.msMatchesSelector;return t.$.selector={find:function(e,n){return t.toArray(n.querySelectorAll(e))},matches:function(e,t){return k.call(e,t)}},t.overwrite(t.$.fn,{filter:L}),t.Animation=function(n){this.running=!1,this.startAt,this.endAt,this.timer,this.duration=n.duration*1e3,this.onTick=n.onTick||function(){},this.timerFunction=t.Animation.effects[n.effect]||t.Animation.effects.ease,this.data=n.data},t.overwrite(t.Animation.prototype,{start:function(){this.startAt=+(new Date),this.endAt=this.startAt+this.duration,this.running=!0,this.tick()},stop:function(){clearTimeout(this.timer),this.running=!1},tick:function(){var e=+(new Date),t=this,n=this.timerFunction(1-(this.endAt-e)/this.duration);if(e>=this.endAt){this.onTick(1,this.data,this),this.stop();return}this.onTick(n,this.data,this),this.timer=setTimeout(function(){t.tick()},1e3/60)}}),t.Animation.effects={linear:function(e){return e},ease:function(e){return e},"ease-in":function(e){return e*e},"ease-out":function(e){return-1*e*(e-2)},"ease-in-out":function(e){return e},bounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},function(e,t){if(!e)return;var n=document.createElement("div"),r=/alpha\(opacity=(.*)\)/i,i=/^-?[\d.]+px$/i;n.style.opacity===t&&(e.$.hook("setStyle.opacity",function(e,t){if(!e.currentStyle||!e.currentStyle.hasLayout)e.style.zoom=1;e.style.filter="alpha(opacity="+t*100+")"}),e.$.hook("getStyle.opacity",function(e){var t=e.style.filter||e.currentStyle.filter,n=t&&t.match(r);return n[1]?parseFloat(n[1])/100:1})),"currentStyle"in n&&!f.getComputedStyle&&(e.$.fn.getStyle=function(t,n){var r,s,o;if(e.$.hooks["setStyle."+t])return e.$.hooks["getStyle."+t](this[0]);r=this[0].style[t];if(n||!r||r==="auto"){if(t==="width")return this[0].offsetWidth-this.getStyle("borderLeftWidth",!0)-this.getStyle("borderRightWidth",!0);if(t==="height")return this[0].offsetHeight-this.getStyle("borderTopWidth",!0)-this.getStyle("borderBottomWidth",!0);r=this[0].currentStyle[t];if(!/px$/.test(r))return s=document.createElement("div"),s.style.cssText="visbility: hidden; position: absolute; line-height: 0;",r.lastIndexOf("%")>0?(o=this[0].parentNode,s.style.height=r):(s.style.borderStyle="solid",s.style.borderBottomWidth="0",s.style.borderTopWidth=r),o=o||document.body,o.appendChild(s),r=s.offsetHeight,o.removeChild(s),s=null,r}return i.test(r)?parseInt(r,10):r}),!("transition"in n.style)&&!("MozTransition"in n.style)&&!("WebkitTransition"in n.style)&&(e.$.fn.morph=function(t){var n=w(arguments);return this.stop(!1),this.each(function(){var r=e.$(this),i={},s={},o;e.each(t,function(e){i[e]=r.getStyle(e,!0)}),e.each(t,function(e){var n=t[e];n=/^-?[\d.]+px$/i.test(n)?parseInt(n,10):n,s[e]=n-i[e]}),o=(new e.Animation({duration:n.duration,effect:n.effect,onTick:function(t){e.each(s,function(e,n){r.setStyle(e,i[e]+s[e]*t)}),t===1&&n.fn&&n.fn(r)}})).start(),r.setData("morph",o)})},e.$.fn.stop=function(n){return this.each(function(){var r=e.$(this),i=r.getData("morph");if(!i||!i.running)return;n=n===t?!0:!!n,i.stop(),n&&data.fn&&data.fn(this)})}),n=null}(t),t.Request=t.Class(t.Observer,{stateTypes:"unsent opened headers loading end".split(" "),transport:null,construct:function(e){this.options=t.clone(t.Request.defaults),this.parent(),t.overwrite(this.options,e)},send:function(){var e=this.options,n=e.async,r=this.getTransport(),i=e.url,s=e.method.toUpperCase(),o=t.type(e.data)==="object"?t.Request.buildQueryString(e.data):e.data;return o&&(s==="GET"||s==="PUT")&&(i+=(i.indexOf("?")===-1?"?":"&")+o,o=null),n&&(r.onreadystatechange=this.onreadystatechange.bind(this)),r.open(s,i,n),(s==="POST"||s==="PUT")&&r.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset="+this.charset),t.each(e.headers,function(e,t){r.setRequestHeader(e,t)}),this.emit("send",this.transport,0),r.send(o||null),n||this.onreadystatechange(),this},abort:function(){return this.transport.abort(),this.emit("abort"),this},set:function(e,n){return e.substr(0,6)==="header"&&t.overwrite(this.options.headers,n),this.options[e]=n,this},getTransport:function(){if(this.transport&&f.XMLHttpRequest)return this.transport;if(f.XMLHttpRequest)return this.transport=new XMLHttpRequest;this.transport&&this.transport.abort();try{return this.transport=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){}throw new Error("Browser doesn`t support XMLHttpRequest")},onreadystatechange:function(){var e=this.transport,t=this.options,n="error";if(e.readyState===4){e.responseJSON=null;if(e.status>=200&&e.status<300){if(t.json||e.getResponseHeader("Content-type").indexOf("application/json")>=0)try{e.responseJSON=JSON.parse(e.responseText)}catch(r){}n="success"}this.emit(n,e,e.status,n),this.transport.onreadystatechange=null}n=this.stateTypes[e.readyState],this.emit(n,e,e.readyState===4?e.status:0,n)}}),t.Request.defaults={url:"",method:"GET",async:!0,json:!1,xml:!1,data:null,auth:null,headers:{"X-Requested-With":"PBJS-"+t.VERSION,Accept:"text/javascript, text/html, application/xml, text/xml, */*"},encoding:"UTF-8",timeout:0},t.overwrite(t.Request,{buildQueryString:A,parseQueryString:O}),t}),function(e,t,n){typeof module!="undefined"&&module.exports?module.exports=n():typeof define=="function"&&define.amd?define(n):t[e]=n()}("qwery",this,function(){function L(){this.c={}}function D(e){return A.g(e)||A.s(e,"(^|\\s+)"+e+"(\\s+|$)",1)}function P(e,t){var n=0,r=e.length;for(;n<r;n++)t(e[n])}function H(e){for(var t=[],n=0,r=e.length;n<r;++n)$(e[n])?t=t.concat(e[n]):t[t.length]=e[n];return t}function B(e){var t=0,n=e.length,r=[];for(;t<n;t++)r[t]=e[t];return r}function j(e){while(e=e.previousSibling)if(e[u]==1)break;return e}function F(e){return e.match(C)}function I(e,t,n,r,i,s,a,c,h,p,d){var v,m,g,y,b;if(this[u]!==1)return!1;if(t&&t!=="*"&&this[o]&&this[o].toLowerCase()!==t)return!1;if(n&&(m=n.match(f))&&m[1]!==this.id)return!1;if(n&&(b=n.match(l)))for(v=b.length;v--;)if(!D(b[v].slice(1)).test(this.className))return!1;if(h&&Q.pseudos[h]&&!Q.pseudos[h](this,d))return!1;if(r&&!a){y=this.attributes;for(g in y)if(Object.prototype.hasOwnProperty.call(y,g)&&(y[g].name||g)==i)return this}return r&&!R(s,Z(this,i)||"",a)?!1:this}function q(e){return O.g(e)||O.s(e,e.replace(b,"\\$1"))}function R(e,t,n){switch(e){case"=":return t==n;case"^=":return t.match(M.g("^="+n)||M.s("^="+n,"^"+q(n),1));case"$=":return t.match(M.g("$="+n)||M.s("$="+n,q(n)+"$",1));case"*=":return t.match(M.g(n)||M.s(n,q(n),1));case"~=":return t.match(M.g("~="+n)||M.s("~="+n,"(?:^|\\s+)"+q(n)+"(?:\\s+|$)",1));case"|=":return t.match(M.g("|="+n)||M.s("|="+n,"^"+q(n)+"(-|$)",1))}return 0}function U(e,t){var n=[],i=[],s,a,f,l,h,p,d,v,m=t,g=_.g(e)||_.s(e,e.split(N)),y=e.match(T);if(!g.length)return n;l=(g=g.slice(0)).pop(),g.length&&(f=g[g.length-1].match(c))&&(m=K(t,f[1]));if(!m)return n;d=F(l),p=m!==t&&m[u]!==9&&y&&/^[+~]$/.test(y[y.length-1])?function(e){while(m=m.nextSibling)m[u]==1&&(d[1]?d[1]==m[o].toLowerCase():1)&&(e[e.length]=m);return e}([]):m[r](d[1]||"*");for(s=0,a=p.length;s<a;s++)if(v=I.apply(p[s],d))n[n.length]=v;return g.length?(P(n,function(e){W(e,g,y)&&(i[i.length]=e)}),i):n}function z(e,t,n){if(X(t))return e==t;if($(t))return!!~H(t).indexOf(e);var r=t.split(","),i,s;while(t=r.pop()){i=_.g(t)||_.s(t,t.split(N)),s=t.match(T),i=i.slice(0);if(I.apply(e,F(i.pop()))&&(!i.length||W(e,i,s,n)))return!0}return!1}function W(e,t,n,r){function s(e,r,o){while(o=k[n[r]](o,e))if(X(o)&&I.apply(o,F(t[r]))){if(!r)return o;if(i=s(o,r-1,o))return i}}var i;return(i=s(e,t.length-1,e))&&(!r||Y(i,r))}function X(e,t){return e&&typeof e=="object"&&(t=e[u])&&(t==1||t==9)}function V(e){var t=[],n,r;e:for(n=0;n<e.length;++n){for(r=0;r<t.length;++r)if(t[r]==e[n])continue e;t[t.length]=e[n]}return t}function $(e){return typeof e=="object"&&isFinite(e.length)}function J(t){return t?typeof t=="string"?Q(t)[0]:!t[u]&&$(t)?t[0]:t:e}function K(e,t,n){return e[u]===9?e.getElementById(t):e.ownerDocument&&((n=e.ownerDocument.getElementById(t))&&Y(n,e)&&n||!Y(e,e.ownerDocument)&&a('[id="'+t+'"]',e)[0])}function Q(e,t){var i,s,o=J(t);if(!o||!e)return[];if(e===window||X(e))return!t||e!==window&&X(o)&&Y(e,o)?[e]:[];if(e&&$(e))return H(e);if(i=e.match(x)){if(i[1])return(s=K(o,i[1]))?[s]:[];if(i[2])return B(o[r](i[2]));if(et&&i[3])return B(o[n](i[3]))}return a(e,o)}function G(e,t){return function(n){var r,i;if(v.test(n)){e[u]!==9&&((i=r=e.getAttribute("id"))||e.setAttribute("id",i="__qwerymeupscotty"),n='[id="'+i+'"]'+n,t(e.parentNode||e,n,!0),r||e.removeAttribute("id"));return}n.length&&t(e,n,!1)}}var e=document,t=e.documentElement,n="getElementsByClassName",r="getElementsByTagName",i="querySelectorAll",s="useNativeQSA",o="tagName",u="nodeType",a,f=/#([\w\-]+)/,l=/\.[\w\-]+/g,c=/^#([\w\-]+)$/,h=/^\.([\w\-]+)$/,p=/^([\w\-]+)$/,d=/^([\w]+)?\.([\w\-]+)$/,v=/(^|,)\s*[>~+]/,m=/^\s+|\s*([,\s\+\~>]|$)\s*/g,g=/[\s\>\+\~]/,y=/(?![\s\w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^'"]*\]|[\s\w\+\-]*\))/,b=/([.*+?\^=!:${}()|\[\]\/\\])/g,w=/^(\*|[a-z0-9]+)?(?:([\.\#]+[\w\-\.#]+)?)/,E=/\[([\w\-]+)(?:([\|\^\$\*\~]?\=)['"]?([ \w\-\/\?\&\=\:\.\(\)\!,@#%<>\{\}\$\*\^]+)["']?)?\]/,S=/:([\w\-]+)(\(['"]?([^()]+)['"]?\))?/,x=new RegExp(c.source+"|"+p.source+"|"+h.source),T=new RegExp("("+g.source+")"+y.source,"g"),N=new RegExp(g.source+y.source),C=new RegExp(w.source+"("+E.source+")?"+"("+S.source+")?"),k={" ":function(e){return e&&e!==t&&e.parentNode},">":function(e,t){return e&&e.parentNode==t.parentNode&&e.parentNode},"~":function(e){return e&&e.previousSibling},"+":function(e,t,n,r){return e?(n=j(e))&&(r=j(t))&&n==r&&n:!1}};L.prototype={g:function(e){return this.c[e]||undefined},s:function(e,t,n){return t=n?new RegExp(t):t,this.c[e]=t}};var A=new L,O=new L,M=new L,_=new L,Y="compareDocumentPosition"in t?function(e,t){return(t.compareDocumentPosition(e)&16)==16}:"contains"in t?function(e,n){return n=n[u]===9||n==window?t:n,n!==e&&n.contains(e)}:function(e,t){while(e=e.parentNode)if(e===t)return 1;return 0},Z=function(){var t=e.createElement("p");return(t.innerHTML='<a href="#x">x</a>')&&t.firstChild.getAttribute("href")!="#x"?function(e,t){return t==="class"?e.className:t==="href"||t==="src"?e.getAttribute(t,2):e.getAttribute(t)}:function(e,t){return e.getAttribute(t)}}(),et=!!e[n],tt=e.querySelector&&e[i],nt=function(e,t){var n=[],r,s;try{return t[u]===9||!v.test(e)?B(t[i](e)):(P(r=e.split(","),G(t,function(e,t){s=e[i](t),s.length==1?n[n.length]=s.item(0):s.length&&(n=n.concat(B(s)))})),r.length>1&&n.length>1?V(n):n)}catch(o){}return rt(e,t)},rt=function(e,t){var n=[],i,s,o,a,f,l;e=e.replace(m,"$1");if(s=e.match(d)){f=D(s[2]),i=t[r](s[1]||"*");for(o=0,a=i.length;o<a;o++)f.test(i[o].className)&&(n[n.length]=i[o]);return n}return P(l=e.split(","),G(t,function(e,r,i){f=U(r,e);for(o=0,a=f.length;o<a;o++)if(e[u]===9||i||Y(f[o],t))n[n.length]=f[o]})),l.length>1&&n.length>1?V(n):n},it=function(e){typeof e[s]!="undefined"&&(a=e[s]?tt?nt:rt:rt)};return it({useNativeQSA:!0}),Q.configure=it,Q.uniq=V,Q.is=z,Q.pseudos={},Q});