/*!
 * pbjs JavaScript Framework v0.6.0
 * http://saartje87.github.com/pbjs
 *
 * Includes Qwery
 * https://github.com/ded/qwery
 *
 * Copyright 2013 Niek Saarberg
 * Licensed MIT
 *
 * Build date 2013-06-27 18:22
 */
(function(t,e,n){this[t]=n(e)})("PB",this,function(t){"use strict";function e(t,e){return function(){var n,i=this.parent;return this.parent=e,n=t.apply(this,arguments),this.parent=i,n}}function n(t){var e=0;if(t.nodeName||t===v)this[0]=t,e=1;else if("length"in t)for(e=0;t.length>e;e++)this[e]=t[e];this.length=e}function i(t){var e=t.__PBID__||(t.__PBID__=f.id());return f.$.cache[e]||(f.$.cache[e]={})}function r(t){var e;return 2===t.length&&(e={},e[t[0]]=t[1]),e||t[0]}function o(t){for(var e,n=1,i={duration:.4,effect:"ease"};t.length>n;n++)switch(typeof t[n]){case"function":i.fn=t[n];break;case"number":i.duration=t[n];break;case"string":e=t[n].replace(/([A-Z])/g,"-$1").toLowerCase(),/^linear|ease|ease-in|ease-out|ease-in-out|cubic-bezier\(.*?\)$/.test(e)&&(i.effect=e)}return i}function s(t,e){var n,i=t.type;this.originalEvent=t,this.currentTarget=e,this.extend(A);for(n in s.hooks)s.hooks.hasOwnProperty(n)&&s.hooks[n].matches.test(i)&&s.hooks[n].hook(this,t)}function h(t,e,n,r,o){var s,h,a,l=i(t);for(l.element=t,l.eventData||(l.eventData={}),l.eventData[e]||(l.eventData[e]=[]),s=l.eventData[e],a=s.length;a--;)if(s.handler===n)return;h={handler:n,responder:u(t.__PBID__,e,n,r,o)},s.push(h),C||"mouseenter"!==e&&"mouseleave"!==e||(e="mouseenter"===e?"mouseover":"mouseout"),v.addEventListener?t.addEventListener(e,h.responder,!1):t.attachEvent("on"+e,h.responder)}function a(t,e,n){var r,o,s=i(t),h=s.eventData&&s.eventData[e];if(h){for(o=h.length;o--;)if(h[o].handler===n){r=h[o],h.splice(o,1);break}r&&(v.removeEventListener?t.removeEventListener(e,r.responder,!1):t.detachEvent("on"+e,r.responder))}}function u(t,e,n,i,r){return function(o){var h,a=f.$.cache[t].element,u=new s(o,a);if(!r||u.matchesSelector(r)){if(a=u.currentTarget,!C&&("mouseleave"===e||"mouseenter"===e)){if(h=u.relatedTarget,a===h||a.contains(h))return;u.type=e}n.call(i||a,u)}}}function l(t,e){var n,i,r="",o=f.type(t);if("array"!==o&&"object"!==o)throw new TypeError(o+" given.");if("array"===o||"object"===o)for(n in t)t.hasOwnProperty(n)&&(i=t[n],r+=null!==i&&"object"==typeof i?l(i,e?e+"["+n+"]":n):encodeURIComponent(e?e+("array"===o?"[]":"["+n+"]"):n)+"="+encodeURIComponent(i)+"&");return e?r:r.replace(/&$/,"")}function c(t){var e,n={};return t=-1!==t.indexOf("?")?t.substr(t.indexOf("?")+1):t,t.split("&").forEach(function(t){e=t.split("="),n[decodeURIComponent(e[0])]=decodeURIComponent(e[1])}),n}var f={},d=t.PB,p=d?d.id():0,g=Array.prototype.slice,y=Object.prototype.toString;f.VERSION="0.6.0",f.id=function(){return++p},f.now=Date.now||function(){return(new Date).getTime()},f.overwrite=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t},f.extend=function(t,e){var n;for(n in e)e.hasOwnProperty(n)&&void 0===t[n]&&(t[n]=e[n]);return t},f.clone=function(t){var e,n;if(null===t||"object"!=typeof t)return t;e="object"===f.type(t)?{}:[];for(n in t)t.hasOwnProperty(n)&&(e[n]=f.clone(t[n]));return e},f.each=function(t,e,n){var i;if(t&&"function"==typeof e)for(i in t)if(t.hasOwnProperty(i)&&e.call(n,i,t[i],t)===!0)return},f.toArray=function(t){for(var e=0,n=[],i=t.length;i>e;e++)n[e]=t[e];return n},f.type=function(t){var e=y.call(t);return e.substr(8,e.length-9).toLowerCase()},f.log=function(){if("undefined"!=typeof console&&"function"==typeof console.log){var t=f.toArray(arguments);t.unshift("pbjs:"),console.log.apply(console,t)}},f.noConflict=function(){return v.PB===f&&(v.PB=d),f},f.Class=function(t,n){var i,r,o,s,h,a;n?a=t.prototype:(n=t,t=null),i=n.construct,r="function"==typeof i?t&&a.construct?function(){var t=i;i=function(){var e=this.parent;this.parent=a.construct,t.apply(this,arguments),this.parent=e},"function"==typeof i&&i.apply(this,arguments)}:n.construct:t&&a.construct?function(){a.construct.apply(this,arguments)}:function(){};for(o in n)n.hasOwnProperty(o)&&(h=n[o],s=t?a[o]:!1,"function"==typeof s&&"function"==typeof h&&(h=e(h,s)),r.prototype[o]=h);return t&&f.extend(r.prototype,a),r},f.Observer=f.Class({construct:function(){this.listeners={}},on:function(t,e,n){var i=t.split(" "),r=i.length;if("function"!=typeof e)throw new TypeError("PB.Observer error, fn is not a function");for(;r--;)t=i[r],this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({fn:e,context:n});return this},off:function(t,e){var n,i=this.listeners[t];if(!t)return this.listeners={},this;if(!i)return this;if(!e)return i.length=0,this;for(n=i.length;n--;)i[n].fn===e&&i.splice(n,1);return i.length||delete this.listeners[t],this},emit:function(t){var e=this.listeners[t],n=g.call(arguments,1),i=0;if(!e)return this;for(;e.length>i;i++)e[i].fn.apply(e[i].context,n);return this}}),f.Queue=f.Class(f.Observer,{construct:function(){var t=this;return this.parent(),this._queue=[],this.next=function(){t.run()},this},queue:function(t,e){return this._queue.push({fn:t,context:e}),this},run:function(){var t=this._queue.shift();if(t)return t.fn.call(t.fn.context,this.next),this},stop:function(){return this._queue.unshift(void 0),this},clear:function(){return this._queue.length=0,this}});var v=t,m=v.document,b=m.documentElement,$=new n(document);f.$=function(t){return t?t instanceof n?t:1===t.nodeType||9===t.nodeType||t===v?new n(t):"string"==typeof t?"#"===t.charAt(0)?(t=m.getElementById(t.substr(1)),t?new n(t):null):"<"===t.charAt(0)&&">"===t.charAt(t.length-1)?f.$.buildFragment(t):$.find(t):null:null},f.$$=function(t){return f.log("Usage of PB.$$ is deprecated"),t instanceof n?t:$.find(t)},n.prototype.constructor=n,f.$.fn=n.prototype,f.$.cache={},f.$.hooks={},f.$.hook=function(t,e){if("function"!=typeof e)throw new TypeError("fn must be a function");f.$.hooks[t]=e},f.overwrite(f.$.fn,{setAttr:function(t){var e,n=0;for(t=r(arguments);this.length>n;n++)for(e in t)t.hasOwnProperty(e)&&this[n].setAttribute(e,t[e]);return this},getAttr:function(t){return this[0].getAttribute(t)},removeAttr:function(t){for(var e=0;this.length>e;e++)this[e].removeAttribute(t);return this},setValue:function(t){for(var e=0;this.length>e;e++)this[e].value=t;return this},getValue:function(){return this[0].value},setData:function(t){var e,n=0;for(t=r(arguments);this.length>n;n++)e=i(this[n]),e.data=e.data||{},f.overwrite(e.data,t);return this},getData:function(t){var e,n=i(this[0]);return n.data&&(e=n.data[t]),void 0===e&&(e=this[0].getAttribute("data-"+t)),e},removeData:function(t){for(var e,n=0;this.length>n;n++)this[n].removeAttribute("data-"+t),e=this[n].__PBID__,e&&f.$.cache[e]&&delete f.$.cache[e].data[t];return this}});var w=document.createElement("div"),S="O ms Moz Webkit".split(" "),T="animationName animationDuration transform transition transitionProperty transitionDuration transitionTimingFunction boxSizing backgroundSize boxReflect".split(" "),x={"float":void 0!==w.style.cssFloat?"cssFloat":"styleFloat"},E={zIndex:!0,zoom:!0,fontWeight:!0,opacity:!0};f.each(T,function(t,e){var n;if(e in w.style)return x[e]=e,void 0;for(n=e.charAt(0).toUpperCase()+e.substr(1),t=S.length;t--;)if(S[t]+n in w.style)return x[e]=S[t]+n,void 0}),w=null,f.overwrite(f.$.fn,{setStyle:function(t){var e,n,i=0;for(t=r(arguments);this.length>i;i++)for(e in t)if(t.hasOwnProperty(e))if(n=t[e],f.$.hooks["setStyle."+e])f.$.hooks["setStyle."+e](this[i],n);else{"number"!=typeof n||E[e]||(n+="px");try{this[i].style[x[e]||e]=n}catch(o){}}return this},getStyle:function(t,e){var n,i=x[t]||t;return n=this[0].style[i],(e||!n||"auto"===n)&&(n=v.getComputedStyle(this[0],null)[i],"auto"===n&&(n=0)),n="opacity"===t?n?parseFloat(n):1:/^-?[\d.]+px$/i.test(n)?parseInt(n,10):n,f.$.hooks["getStyle."+t]?f.$.hooks["getStyle."+t](this[0],n,i):n}}),f.$.fn.morph=x.transition?function(t){var e=o(arguments);return this.each(function(){var n=f.$(this),i=n.getData("morph")||{},r={transition:"all "+e.duration+"s "+e.effect+" 0s"};i.running&&n.stop(!1),i.end=t,i.fn=e.fn,i.running=!0,f.each(t,function(t){r[t]=n.getStyle(t,!0)}),n.setStyle(r),this.offsetHeight,n.setStyle(t),i.timer=setTimeout(function(){n[0].parentNode&&(i.running=!1,n.setStyle({transition:""}),i.fn&&i.fn(n))},1e3*e.duration+50),n.setData("morph",i)})}:function(t){var e=o(arguments),n=0;if(this.setStyle(t),e.fn)for(;this.length>n;n++)e.fn(f.$(this[n]));return this},f.$.fn.stop=function(t){return this.each(function(){var e=f.$(this),n=e.getData("morph");n&&n.running&&(t=void 0===t?!0:!!t,n.running=!1,clearTimeout(n.timer),n.end.transition="none 0s ease 0s",t||f.each(n.end,function(t){n.end[t]=e.getStyle(t,!0)}),e.setStyle(n.end),t&&n.fn&&n.fn(this))})},f.overwrite(f.$.fn,{append:function(t){var e=0;for(t=f.$(t);t.length>e;e++)this[0].appendChild(t[e]);return this},appendTo:function(t){var e=0;for(t=f.$(t);this.length>e;e++)t[0].appendChild(this[e]);return this},prepend:function(t){var e=0,n=this[0].firstElementChild||this[0].firstChild;for(t=f.$(t);t.length>e;e++)n?this[0].insertBefore(t[e],n):this[0].appendChild(t[e]);return this},prependTo:function(t){var e,n=0;for(t=f.$(t),e=t[0].firstElementChild||t[0].firstChild;this.length>n;n++)e?t[0].insertBefore(this[n],e):t[0].appendChild(this[n]);return this},insertBefore:function(t){var e=0;for(t=f.$(t);this.length>e;e++)t[0].parentNode.insertBefore(this[e],t[0]);return this},insertAfter:function(t){var e,n=0;for(t=f.$(t),e=t[0].nextElementSibling||t[0].nextSibling;this.length>n;n++)e?t[0].parentNode.insertBefore(this[n],e):t[0].appendChild(this[n]);return this},replace:function(t){return t=f.$(t),this.insertBefore(t),t.remove(),this},remove:function(){for(var t=0;this.length>t;t++)delete f.$.cache[this[t].__PBID__],this[t].parentNode&&this[t].parentNode.removeChild(this[t]),delete this[t];return null},empty:function(){return this.setHtml("")},clone:function(t){for(var e,n=[],i=0;this.length>i;i++)if(n[i]=this[i].cloneNode(t),n[i].removeAttribute("id"),n[i].removeAttribute("__PBID__"),t)for(e=f.$(n[i]).find("*");length>i;i++)e[i].removeAttribute("id"),e[i].removeAttribute("__PBID__");return new this.constructor(n)},setHtml:function(t){for(var e=0;this.length>e;e++)try{this[e].innerHTML=t}catch(n){f.$(this[e]).children().remove(),/^<tbody/i.test(t)?f.$("<table>"+t+"</table>").firstChild().appendTo(this[e]):/^<tr/i.test(t)?f.$("<table><tbody>"+t+"<tbody></table>").firstChild().children().appendTo(this[e]):/^<td/i.test(t)?f.$("<table><tbody><tr>"+t+"</tr><tbody></table>").firstChild().firstChild().children().appendTo(this[e]):f.$(t).appendTo(this[e])}return this},getHtml:function(){return this[0].innerHTML},setText:function(t){var e=0;for(this.setHtml("");this.length>e;e++)this[e].appendChild(m.createTextNode(t));return this},getText:function(){return this[0].textContent||this[0].nodeValue||""}}),f.overwrite(f.$.fn,{width:function(){return this[0]===v?v.innerWidth||b.clientWidth:this[0]===m?Math.max(b.clientWidth,b.offsetWidth,b.scrollWidth):this.getStyle("width",!0)},innerWidth:function(){return this.width()+this.getStyle("paddingLeft",!0)+this.getStyle("paddingRight",!0)},outerWidth:function(t){var e=this.innerWidth()+this.getStyle("borderLeftWidth",!0)+this.getStyle("borderRightWidth",!0);return t&&(e+=this.getStyle("marginLeft",!0)+this.getStyle("marginRight",!0)),e},scrollWidth:function(){return this[0].scrollWidth},height:function(){return this[0]===v?v.innerHeight||b.clientHeight:this[0]===m?Math.max(b.clientHeight,b.offsetHeight,b.scrollHeight):this.getStyle("height",!0)},innerHeight:function(){return this.height()+this.getStyle("paddingTop",!0)+this.getStyle("paddingBottom",!0)},outerHeight:function(t){var e=this.innerHeight()+this.getStyle("borderTopWidth",!0)+this.getStyle("borderBottomWidth",!0);return t&&(e+=this.getStyle("marginTop",!0)+this.getStyle("marginBottom",!0)),e},scrollHeight:function(){return this[0].scrollHeight},setScroll:function(t){for(var e=0;this.length>e;e++)void 0!==t.top&&(this[e].scrollTop=t.top),void 0!==t.left&&(this[e].scrollLeft=t.left);return this},getScroll:function(){return{top:this[0].scrollTop,left:this[0].scrollLeft}},position:function(){var t=this[0].getBoundingClientRect();return{top:t.top+(v.scrollY||v.pageYOffset),left:t.left+(v.scrollX||v.pageXOffset)}},offset:function(){for(var t=this[0],e={top:0,left:0};t&&(e.top+=t.offsetTop,e.left+=t.offsetLeft,t=t.offsetParent,t&&"static"===f.$(t).getStyle("position")););return e},hasClass:function(t){return(" "+this[0].className+" ").indexOf(" "+t+" ")>=0},addClass:function(t){for(var e,n,i=0,r=t.split(" ");this.length>i;i++)for(e=" "+this[i].className+" ",n=0;r.length>n;n++)e.indexOf(" "+r[n]+" ")>=0||(this[i].className+=(this[i].className?" ":"")+r[n]);return this},removeClass:function(t){for(var e,n,i=0,r=t.split(" "),o=r.length;this.length>i;i++){for(e=" "+this[i].className+" ",n=0;o>n;n++)e.indexOf(" "+r[n]+" ")>=0&&(e=e.replace(" "+r[n]+" "," "));e=e.replace(/^\s|\s$/g,""),e?this[i].className=e:this[i].removeAttribute("class")}return this},show:function(){for(var t,e=0;this.length>e;e++)t=this[e].style,"none"===t.display&&(t.display=i(this[e])["css-display"]||"block");return this},hide:function(){for(var t,e=0;this.length>e;e++)t=this[e].style,"none"!==t.display&&(i(this[e])["css-display"]=f.$(this[e]).getStyle("display"),t.display="none");return this},isVisible:function(){var t=f.$(this[0]);return"none"!==t.getStyle("display")&&t.getStyle("opacity")>0}}),f.overwrite(f.$.fn,{parent:function(){return f.$(this[0].parentNode)},children:function(){var t=this[0].firstElementChild||this[0].firstChild,e=0,n=[];if(!t)return null;do 1===t.nodeType&&(n[e++]=t);while(t=t.nextSibling);return new this.constructor(n)},firstChild:function(){return f.$(this[0].firstElementChild||this[0].firstChild)},lastChild:function(){return f.$(this[0].lastElementChild||this[0].lastChild)},first:function(){return f.$(this[0])},last:function(){return f.$(this[this.length-1])},next:function(){return f.$(this[0].nextElementSibling||this[0].nextSibling)},prev:function(){return f.$(this[0].previousElementSibling||this[0].previousSibling)},closest:function(t,e){var n=this[0];e=e||50;do{if(f.$.selector.matches(n,t))return n;if(!--e)break}while(n=n.parentNode);return null},indexOf:function(t){var e=0;if(t=f.$(t),!t)return-1;for(;this.length>e;e++)if(this[e]===t[0])return e;return-1},childAt:function(t){var e=this.children();return e&&e[t]?f.$(e[t]):null},contains:function(){},find:function(t){for(var e,n,i,r,o,s=0;this.length>s;s++)if(0===s)o=f.$.selector.find(t,this[s]);else for(r=f.$.selector.find(t,this[s]),e=0,n=o.length,i=r.length;i>e;e++)-1===o.indexOf(r[e])&&(o[n++]=r[e]);return new this.constructor(o)},matches:function(t){for(var e=0;this.length>e;e++)if(!f.$.selector.matches(this[e],t))return!1;return!0}});var C="onmouseenter"in b&&"onmouseleave"in b,k=/^(?:load|unload|abort|error|select|change|submit|reset|focus|blur|resize|scroll)$/,A="type target defaultPrevented bubbles".split(" "),D="altKey ctrlKey metaKey shiftKey which pageX pageY".split(" ");s.prototype={extend:function(t){for(var e=0,n=t.length;n>e;e++)this[t[e]]=this.originalEvent[t[e]]},preventDefault:function(){this.defaultPrevented=!0,this.originalEvent.preventDefault()},stopPropagation:function(){this.originalEvent.stopPropagation()},stop:function(){this.preventDefault(),this.stopPropagation()},matchesSelector:function(t){var e=this.target;do{if(f.$.selector.matches(e,t))return this.currentTarget=e,!0;if(e===this.currentTarget)return!1}while(e=e.parentNode);return!1}},s.hooks={mouse:{matches:/(!?mouse|click|drag|focusin|focusout)/,hook:function(t,e){t.extend(D),e.relatedTarget&&(t.relatedTarget=e.relatedTarget)}},mousewheel:{matches:/^(?:DOMMouseScroll|mousewheel|wheel)$/,hook:function(t,e){t.wheelDelta=e.wheelDelta?e.wheelDelta/120:-(e.detail||0)/3}}},f.$.Event=s,f.overwrite(f.$.fn,{on:function(t,e,n,i){var r,o=t.split(" "),s=o.length,a=0;if("function"==typeof e&&(i=n,n=e,e=null),"function"!=typeof n)throw new TypeError;for(;this.length>a;a++)for(r=0;s>r;r++)h(this[a],o[r],n,i,e);return this},off:function(t,e){for(var r,o,s=0;this.length>s;s++)if(r=i(this[s]).eventData,r||!t||r[t])if(t)if(e)a(this[s],t,e);else{for(o=0;r[t].length>o;o++)a(this[s],t,r[t][o].handler);delete r[name]}else for(o in r)r.hasOwnProperty(o)&&new n(this[s]).off(o);return this},emit:function(t){for(var e,n=0,i=k.test(t);this.length>n;n++)i||"input"===this[n].nodeName&&"click"===t?this[n][t]():m.createEvent?(e=m.createEvent("HTMLEvents"),e.initEvent(t,!0,!0,v,1),this[n].dispatchEvent(e)):this[n].fireEvent("on"+t,m.createEventObject());return this}}),f.$.buildFragment=function(t){var e,n=m.createElement("div");return n.innerHTML=t,e=f.$(n).children(),n=null,e},f.overwrite(f.$.fn,{each:function(t){for(var e=g.call(arguments,1),n=0;this.length>n;n++)t.apply(this[n],e);return this},filter:function(t){for(var e=[],n=0,i="string"==typeof t;this.length>n;n++)i?f.$.selector.matches(this[n],t)&&e.push(this[n]):t(this[n])===!0&&e.push(this[n]);return new this.constructor(e)}}),f.Animation=function(t){this.running=!1,this.duration=1e3*t.duration,this.onTick=t.onTick||function(){},this.timerFunction=f.Animation.effects[t.effect]||f.Animation.effects.ease,this.data=t.data},f.overwrite(f.Animation.prototype,{start:function(){this.startAt=+new Date,this.endAt=this.startAt+this.duration,this.running=!0,this.tick()},stop:function(){clearTimeout(this.timer),this.running=!1},tick:function(){var t=+new Date,e=this,n=this.timerFunction(1-(this.endAt-t)/this.duration);return t>=this.endAt?(this.onTick(1,this.data,this),this.stop(),void 0):(this.onTick(n,this.data,this),this.timer=setTimeout(function(){e.tick()},1e3/60),void 0)}}),f.Animation.effects={linear:function(t){return t},ease:function(t){return t},"ease-in":function(t){return t*t},"ease-out":function(t){return-1*t*(t-2)},"ease-in-out":function(t){return t},bounce:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}};var O=b.matchesSelector||b.mozMatchesSelector||b.webkitMatchesSelector||b.oMatchesSelector||b.msMatchesSelector;f.$.selector={find:function(t,e){return f.toArray(e.querySelectorAll(t))},matches:function(t,e){return 1!==t.nodeType?!1:O.call(t,e)}},function(t){function e(){var e;for(o=!0;e=s.shift();)e(t)}function n(e){o?e(t):s.push(e)}var i,r=v.document,o="complete"===r.readyState,s=[];r.addEventListener?r.addEventListener("DOMContentLoaded",i=function(){r.removeEventListener("DOMContentLoaded",i),e()}):r.attachEvent("onreadystatechange",i=function(){"complete"===r.readyState&&(r.detachEvent("onreadystatechange",i),e())}),t.ready=n}(f),function(){Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),n=this,i=function(){},r=function(){return n.apply(this instanceof i&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return i.prototype=this.prototype,r.prototype=new i,r})}(f),function(t,e){if(t){var n=document.createElement("div"),i=/alpha\(opacity=(.*)\)/i,r=/^-?[\d.]+px$/i;n.style.opacity===e&&(t.$.hook("setStyle.opacity",function(t,e){t.currentStyle&&t.currentStyle.hasLayout||(t.style.zoom=1),t.style.filter="alpha(opacity="+100*e+")"}),t.$.hook("getStyle.opacity",function(t){var e=t.style.filter||t.currentStyle.filter,n=e&&e.match(i);return n&&n[1]?parseFloat(n[1])/100:1})),"currentStyle"in n&&!v.getComputedStyle&&(t.$.fn.getStyle=function(e,n){var i,o,s;if(t.$.hooks["setStyle."+e])return t.$.hooks["getStyle."+e](this[0]);if(i=this[0].style[e],n||!i||"auto"===i){if("width"===e)return this[0].offsetWidth-this.getStyle("borderLeftWidth",!0)-this.getStyle("borderRightWidth",!0);if("height"===e)return this[0].offsetHeight-this.getStyle("borderTopWidth",!0)-this.getStyle("borderBottomWidth",!0);if(i=this[0].currentStyle[e],!/px$/.test(i))return o=document.createElement("div"),o.style.cssText="visbility: hidden; position: absolute; line-height: 0;","auto"===i||i.lastIndexOf("%")>0?(s=this[0].parentNode,o.style.height=i):(o.style.borderStyle="solid",o.style.borderBottomWidth="0",o.style.borderTopWidth=i),s=s||document.body,s.appendChild(o),i=o.offsetHeight,s.removeChild(o),o=null,i}return r.test(i)?parseInt(i,10):i}),"transition"in n.style||"MozTransition"in n.style||"WebkitTransition"in n.style||(t.$.fn.morph=function(e){var n=o(arguments);return this.stop(!1),this.each(function(){var i,r=t.$(this),o={},s={};t.each(e,function(t){o[t]=r.getStyle(t,!0)}),t.each(e,function(t){var n=e[t];n=/^-?[\d.]+px$/i.test(n)?parseInt(n,10):n,s[t]=n-o[t]}),i=new t.Animation({duration:n.duration,effect:n.effect,onTick:function(e){t.each(s,function(t,n){r.setStyle(t,o[t]+n*e)}),1===e&&n.fn&&n.fn(r)}}).start(),r.setData("morph",i)})},t.$.fn.stop=function(n){return this.each(function(){var i=t.$(this),r=i.getData("morph");r&&r.running&&(n=n===e?!0:!!n,r.stop(),n&&r.fn&&r.fn(this))})}),n=null}}(f),function(t,e){function n(){e.$.cache=null,i.detachEvent("onunload",n)}var i=t,r=i.document,o=r.documentElement,s=r.body;(i.attachEvent||!i.addEventListener)&&(e.overwrite(e.$.Event.hooks,{fixes:{matches:/(!?)/,hook:function(t,e){t.target=e.srcElement||e.toElement}},mouseIe:{matches:/(!?mouse|click|focus|drag)/,hook:function(t,e){t.pageX=e.clientX+(o.scrollLeft||s.scrollLeft)-(o.clientLeft||0),t.pageY=e.clientY+(o.scrollTop||s.scrollTop)-(o.clientTop||0),e.fromElement&&(t.relatedTarget=e.fromElement),t.which=void 0===e.keyCode?e.charCode:e.keyCode,t.which=0===t.which?1:4===t.which?2:2===t.which?3:t.which}}}),e.$.Event.prototype.stopPropagation=function(){this.defaultPrevented=!0,this.cancelBubble=!0},e.$.Event.prototype.preventDefault=function(){this.returnValue=!1},i.attachEvent("onunload",n))}(t||this,f);var P="XMLHttpRequest"in t;return f.Request=f.Class(f.Observer,{xhr:null,construct:function(t){this.options=f.clone(f.Request.defaults),this.parent(),f.overwrite(this.options,t)},send:function(){var t=this.options,e=t.async,n=this.getTransport(),i=t.url,r=t.method.toUpperCase(),o="object"===f.type(t.data)?f.Request.buildQueryString(t.data):t.data;return clearTimeout(this.abortTimer),!o||"GET"!==r&&"PUT"!==r||(i+=(-1===i.indexOf("?")?"?":"&")+o,o=null),e&&(n.onreadystatechange=this.onreadystatechange.bind(this)),n.open(r,i,e),("POST"===r||"PUT"===r)&&n.setRequestHeader("Content-type","application/x-www-form-urlencoded; charset="+this.charset),f.each(t.headers,function(t,e){n.setRequestHeader(t,e)}),this.emit("send",n,0),n.send(o||null),t.timeout>0&&(this.abortTimer=setTimeout(this.abort.bind(this),1e3*t.timeout)),e||this.onreadystatechange(),this},abort:function(){return this.xhr.onreadystatechange=null,this.xhr.abort(),this.emit("abort"),this},set:function(t,e){return"header"===t.substr(0,6)?f.overwrite(this.options.headers,e):this.options[t]=e,this},getTransport:function(){return this.xhr&&P?this.xhr:(this.xhr&&this.xhr.abort(),this.xhr=P?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.xhr)},onreadystatechange:function(){var t,e=this.xhr,n=this.options;if(4===e.readyState){switch(clearTimeout(this.abortTimer),e.responseJSON=null,e.status){case 200:case 201:case 204:case 304:if(t="success",n.json||e.getResponseHeader("Content-type").indexOf("application/json")>=0)try{e.responseJSON=JSON.parse(e.responseText)}catch(i){}break;default:t="error"}this.xhr.onreadystatechange=null,this.emit(t,e,e.status),this.emit("end",e,e.status)}}}),f.Request.defaults={url:"",method:"GET",async:!0,json:!1,xml:!1,data:null,auth:null,headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml, text/xml, */*"},encoding:"UTF-8",timeout:0,crossdomain:!1},f.overwrite(f.Request,{buildQueryString:l,parseQueryString:c}),f});